MAIN	START	1000
FIRST	JSUB	STKINIT
	LDA	#0
	STA	TOPLEN
	STA	RESULT
	LDX	#0
INLEN	JSUB	INLOOP
	SUB	#48
	STA	LENGTH
STIN	JSUB	INLOOP
	COMP	#10
	JEQ	STIN
	SUB	#48
	COMP	#0
	JEQ	POP
	JSUB	PUSH
RTPOP	TIX	LENGTH
	JLT	STIN
STOUT	LDX	#0
	LDA	TOPLEN
	COMP	#0
	JEQ	PRINT
STOUT2	JSUB	STPOP
	LDA	@TOP
	ADD	RESULT
	STA	RESULT
	TIX	TOPLEN
	JLT	STOUT2
PRINT	LDA	RESULT
	COMP	#9
	JGT	OUTLP2
	JSUB	OUTLP
EXIT	LDA	#0

A	J	A
INLOOP	TD	INPUT
	JEQ	INLOOP
	RD	INPUT
	RSUB

OUTLP	TD	OUTPUT
	JEQ	OUTLP
	LDA	RESULT
	ADD	#48
	WD	OUTPUT
	RSUB

OUTLP2	LDX	#0
	DIV	#10
	STA	TMP
	ADD	#48
	STCH	STR,X
	LDS	TEN
	LDT	TMP
	MULR	S,T
	LDS	RESULT
	SUBR	T,S
	STS	RESULT
	LDA	RESULT
	ADD	#48
	LDX	#1
	STCH	STR,X
	LDX	#0
OUTLOP	TD	OUTPUT
	JEQ	OUTLOP
	LDCH	STR,X
	WD	OUTPUT
	TIX	STRLEN
	JLT	OUTLOP
	J	EXIT
	


STKINIT	LDA	#STACK
	STA	TOP
	RSUB

PUSH	STA	@TOP
	LDA	TOP
	ADD	#3
	STA	TOP
	LDA	TOPLEN
	ADD	#1
	STA	TOPLEN
	RSUB

POP	LDA	TOP
	SUB	#3
	STA	TOP
	LDA	TOPLEN
	SUB	#1
	STA	TOPLEN
	J	RTPOP

STPOP	LDA	TOP
	SUB	#3
	STA	TOP
	LDA	@TOP
	RSUB

STRLEN	WORD	2
TEN	WORD	10
TMP	RESW	1	
STR	RESB	2
LENGTH	RESW	1
TOP	RESW	1
TOPLEN	RESW	1
STACK	RESW	10000
INPUT	BYTE	0
OUTPUT	BYTE	1
RESULT	RESW	1